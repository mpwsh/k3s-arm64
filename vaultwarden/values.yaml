vaultwarden:
  ingress:
    main:
      enabled: true
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-prod
        external-dns.alpha.kubernetes.io/hostname: bw.mpw.sh
        external-dns.alpha.kubernetes.io/target: k3s.mpw.sh
        external-dns.alpha.kubernetes.io/cloudflare-proxied: "false"
        external-dns.alpha.kubernetes.io/ttl: "60"
      hosts:
      - host: bw.mpw.sh
        paths:
        - path: /
          pathType: Prefix
          service:
            port: 80
        - path: /notifications/hub/negotiate
          pathType: Prefix
          service:
            port: 80
        - path: /notifications/hub
          pathType: Prefix
          service:
            port: 3012
  persistence:
    config:
      enabled: true
  postgresql:
    enabled: true
    persistence:
      accessModes:
      - ReadWriteOnce
      enabled: true
      storageClass: null
    auth:
      existingSecret: postgres-creds
      secretKeys:
        adminPasswordKey: "admin_pw"
        userPasswordKey: "user_pw"
      postgresqlDatabase: bitwarden
      postgresqlUsername: mpw
  service:
    main:
      ports:
        http:
          port: 80
        websocket:
          enabled: true
          port: 3012
  strategy:
    type: Recreate
